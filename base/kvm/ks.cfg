#Generated by Kickstart Configurator
#platform=x86

# Fetch content from here
url â€“url http://nl.archive.ubuntu.com/ubuntu/
#System language
lang en_US
#Language modules to install
langsupport en_US.UTF-8
#System keyboard
keyboard us_intl
#System timezone
timezone Europe/Amsterdam
#Root password
rootpw --disabled
#Initial user
user ubuntu --fullname "Ubuntu User" --password root4me2
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#System bootloader configuration
bootloader --location=mbr 
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel 
#Basic disk partition
part / --fstype ext4 --size 1 --grow --asprimary 
part swap --size 1024 
part /boot --fstype ext4 --size 256 --asprimary
#System authorization infomation
auth  --useshadow  --enablemd5 
#Network information
network --bootproto=dhcp --device=eth0
#Firewall configuration
firewall --disabled 
#Package install information
%packages
#Package install information
%packages
ubuntu-minimal
openssh-server
screen
curl
wget
acpid
unattended-upgrades
linux-image-generic
python-apt
lshw
lldpd
dmidecode
git 
ca-certificates 
automake 
libtool
make 
vim 
pkg-config 
libssl-dev 
libaio-dev


%post

echo "ubuntu  ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ubuntu


#check if this works, cat /var/log/installer/?? for output
mkdir -p /home/ubuntu/.ssh
echo "ssh-rsa <key> <user>" >> /home/ubuntu/.ssh/authorized_keys
sudo chmod -R go= /home/ubuntu/.ssh
sudo chown -R ubuntu:ubuntu /home/ubuntu/.ssh

# setup locales
locale-gen en_US.UTF-8
update-locale LANG="en_US.UTF-8"
echo 'LANG=en_US.UTF-8' >> /etc/environment
echo 'LC_ALL=en_US.UTF-8' >> /etc/environment
